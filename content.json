{"meta":{"title":"A blog","subtitle":"","description":"Think bigger，start small","author":"GZ","url":"https://dormancywang.github.io","root":"/"},"pages":[{"title":"404 Not Found：该页无法显示","date":"2022-06-01T14:47:18.322Z","updated":"2022-06-01T14:47:18.322Z","comments":false,"path":"/404.html","permalink":"https://dormancywang.github.io/404.html","excerpt":"","text":""},{"title":"关于","date":"2022-06-01T14:47:18.322Z","updated":"2022-06-01T14:47:18.322Z","comments":false,"path":"about/index.html","permalink":"https://dormancywang.github.io/about/index.html","excerpt":"","text":"个人详细介绍"},{"title":"书单","date":"2022-06-02T11:57:16.246Z","updated":"2022-06-01T14:47:18.322Z","comments":false,"path":"books/index.html","permalink":"https://dormancywang.github.io/books/index.html","excerpt":"","text":""},{"title":"分类","date":"2022-06-01T14:47:18.322Z","updated":"2022-06-01T14:47:18.322Z","comments":false,"path":"categories/index.html","permalink":"https://dormancywang.github.io/categories/index.html","excerpt":"","text":""},{"title":"友情链接","date":"2022-06-02T12:06:18.536Z","updated":"2022-06-01T14:47:18.322Z","comments":true,"path":"links/index.html","permalink":"https://dormancywang.github.io/links/index.html","excerpt":"","text":""},{"title":"Repositories","date":"2022-06-01T14:47:18.417Z","updated":"2022-06-01T14:47:18.417Z","comments":false,"path":"repository/index.html","permalink":"https://dormancywang.github.io/repository/index.html","excerpt":"","text":""},{"title":"标签","date":"2022-06-01T14:47:18.418Z","updated":"2022-06-01T14:47:18.418Z","comments":false,"path":"tags/index.html","permalink":"https://dormancywang.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"开始实践","slug":"docker4","date":"2022-06-04T11:36:43.000Z","updated":"2022-06-04T15:38:39.341Z","comments":true,"path":"2022/06/04/docker4/","link":"","permalink":"https://dormancywang.github.io/2022/06/04/docker4/","excerpt":"","text":"DockerFile A Dockerfile is simply a text-based script of instructions that is used to create a container image. 又来了 这个 instructions 具体要怎么理解啊，这指南感觉好牵强啊,指令么。12345678# syntax=docker/dockerfile:1FROM node:12-alpineRUN apk add --no-cache python2 g++ makeWORKDIR /appCOPY . .RUN yarn install --productionCMD [&quot;node&quot;, &quot;src/index.js&quot;]EXPOSE 3000 docker build -t getting-started . 基本的创建容器操作，下面进行修改操作 就是重新build image Replace the old containeGet the ID of the container by using thedocker pscommand 12docker stop &lt;id&gt;docker rm &lt;id&gt; ////-f 回顾：While we were able to build an update, there were two things you might have noticed: All of the existing items in our todo list are gone! That’s not a very good app! We’ll talk about that shortly. 数据都没了 There were a lot of steps involved for such a small change. In an upcoming section, we’ll talk about how to see code updates without needing to rebuild and start a new container every time we make a change. 步骤太多太麻烦 Docker Hub的使用create 一个repo 直接push就完了 Persist the DBThe container’s filesystemWhen a container runs, it uses the various layers from an image for its filesystem. Each container also gets its own “scratch space” to create&#x2F;update&#x2F;remove files. Any changes won’t be seen in another container, even if they are using the same image. Container volumes解决数据交互问题的， Volumes provide the ability to connect specific filesystem paths of the container back to the host machine. 1While named volumes and bind mounts (which we’ll talk about in a minute) are the two main types of volumes supported by a default Docker engine installation, there are many volume driver plugins available to support NFS, SFTP, NetApp, and more! This will be especially important once you start running containers on multiple hosts in a clustered environment with Swarm, Kubernetes, etc. 两种类型的 volumes : named volumes -v 命令，起一个名字 下次还用这个名字就可以了。docker run -dp 3000:3000 -v todo-db:/etc/todos getting-started 查看volume存储在那个位置docker volume inspect bind mounts: but it’s often used to provide additional data into containers.这是用来给容器提供额外数据的，和第一个不一样，第一个是用来存储数据出来的。所以这里的逻辑有两种，取出，放入。 For Node-based 这里的node是nodejs。。。我还以为是集群的节点 applications, nodemon 这玩意是nodejs的一个库 is a great tool to watch for file changes and then restart the application. There are equivalent tools in most other languages and frameworks. Start a dev-mode containerTo run our container to support a development workflow, we will do the following: Mount our source code into the container Install all dependencies, including the “dev” dependencies Start nodemon to watch for filesystem changes 这也太搞了吧。 为了搭建一个开发工作流程，他把源码文件 bind mounts到了container，container里面是运行nodemon 还是外面运行不清楚。。。。 是实现一个自动重启。 他这里的mounts机制是什么，如果不涉及复制，只是映射的话其实还挺好的。复用了。","categories":[],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://dormancywang.github.io/tags/Docker/"},{"name":"分布式","slug":"分布式","permalink":"https://dormancywang.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F/"}]},{"title":"目标，基本设置","slug":"docker3","date":"2022-06-04T08:50:30.000Z","updated":"2022-06-04T11:32:30.574Z","comments":true,"path":"2022/06/04/docker3/","link":"","permalink":"https://dormancywang.github.io/2022/06/04/docker3/","excerpt":"","text":"start docker run -d -p 80:80 docker/getting-started -d - run the container in detached mode (in the background)-p 80:80 - map port 80 of the host to port 80 in the containerdocker&#x2F;getting-started - the image to use 见一个好玩吧 Docker Dashboard 貌似很有用 It gives you quick access to container logs, lets you get a shell inside the container, and lets you easily manage container lifecycle (stop, remove, etc.). container究竟是什么 a container is a sandboxed process on your machine that is isolated from all other processes on the host machine. That isolation leverages kernel namespaces and cgroups, features that have been in Linux for a long time.沙箱程序？linux内核源码还是要好好看看！ 学了go以后可以看看，还有kernel。 https://youtu.be/8fi7uSYlOdc container image 究竟是什么When running a container, it uses an isolated filesystem. This custom filesystem is provided by a container image. Since the image contains the container’s filesystem, it must contain everything needed to run an application - all dependencies, configuration, scripts, binaries, etc. The image also contains other configuration for the container, such as environment variables, a default command to run, and other metadata.给conainer 提供信息的一个东西，container是一个程序，而image是一个类文件的合集 cli几个cli单独看一下 docker versiondocker rundocker imagedocker container","categories":[],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://dormancywang.github.io/tags/Docker/"},{"name":"分布式","slug":"分布式","permalink":"https://dormancywang.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F/"}]},{"title":"docker安装","slug":"docker安装","date":"2022-06-04T02:52:54.000Z","updated":"2022-06-04T08:45:17.949Z","comments":true,"path":"2022/06/04/docker安装/","link":"","permalink":"https://dormancywang.github.io/2022/06/04/docker%E5%AE%89%E8%A3%85/","excerpt":"","text":"Linux 安装花里胡哨的一堆 安装engine就可以了 Docker Engine overviewDocker Engine is an open source containerization technology for building and containerizing your applications. Docker Engine acts as a client-server application with: A server with a long-running daemon process dockerd.APIs which specify interfaces that programs can use to talk to and instruct the Docker daemon.A command line interface (CLI) client docker. The CLI uses Docker APIs to control or interact with the Docker daemon through scripting or direct CLI commands. Many other Docker applications use the underlying API and CLI. The daemon creates and manage Docker objects, such as images, containers, networks, and volumes. 还是想强调api和cli的重要性 特性过期策略到官网找吧 一些前置的操作也看官网吧 卸载旧版本 老版本的叫做 docker docker-engine /var/lib/docker 里面 including images, containers, volumes, and networks, are preserved.都被保存了Docker Engine package 现在叫做docker-ce 安装方法Most users set up Docker’s repositories and install from them, for ease of installation and upgrade tasks. This is the recommended approach. 设置docker仓库，安装 Some users download the RPM package and install it manually and manage upgrades completely manually. This is useful in situations such as installing Docker on air-gapped systems with no access to the internet.使用rpm来到不联网的机器上安装 In testing and development environments, some users choose to use automated convenience scripts to install Docker. 使用脚本安装 install using the repository设置仓库1234sudo yum install -y yum-utilssudo yum-config-manager \\ --add-repo \\ https://download.docker.com/linux/centos/docker-ce.repo Install the latest version of Docker Engine, containerd, and Docker Compose or go to the next step to install a specific version 1sudo yum install docker-ce docker-ce-cli containerd.io docker-compose-plugin 这是个啥玩意，containerd???这也要安装？ This command installs Docker, but it doesn’t start Docker. It also creates a docker group, however, it doesn’t add any users to the group by default.还帮你创建了一个组 安装特定版本，看官网吧，有点麻烦 12yum list docker-ce --showduplicates | sort -r 安装完成启动就好了 12sudo systemctl start dockersudo docker run hello-world 安装完成后需要sudo来运行，除非你去设置了 linux postinstall 的相关内容 install from a package Go to https://download.docker.com/linux/centos/ and choose your version of CentOS. Then browse to x86_64&#x2F;stable&#x2F;Packages&#x2F; and download the .rpm file for the Docker version you want to install 下rpm的包 yum install path_to_package.rpm 其他都一样 升级就是重按一遍，嗯，真方便使用方便的脚本 get.docker.com 可以自己加以定制 安装后的操作设置非root用户访问 The Docker daemon binds to a Unix socket instead of a TCP port. By default that Unix socket is owned by the user root and other users can only access it using sudo. The Docker daemon always runs as the root user. If you don’t want to preface the docker command with sudo, create a Unix group called docker and add users to it. When the Docker daemon starts, it creates a Unix socket accessible by members of the docker group. 就是说 docker daemon 用的是unix socket而不是tcp端口，所以只有root可以访问，普通用户加sudo就好了如果不想加可以加入docker用户组，这个组的权限和root一样，会有安全问题 登入登出，重启虚拟机让设置生效newgrp docker 设置自动启动设置默认日志驱动json-file Configure where the Docker daemon listens for connections其他的看官网吧，懒得写了","categories":[],"tags":[{"name":"分布式技术","slug":"分布式技术","permalink":"https://dormancywang.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E6%8A%80%E6%9C%AF/"},{"name":"Docker","slug":"Docker","permalink":"https://dormancywang.github.io/tags/Docker/"}]},{"title":"Docker overview","slug":"Docker","date":"2022-06-04T01:18:32.000Z","updated":"2022-06-04T02:50:48.261Z","comments":true,"path":"2022/06/04/Docker/","link":"","permalink":"https://dormancywang.github.io/2022/06/04/Docker/","excerpt":"","text":"Docker overview Docker is an open platform for developing, shipping, and running applications. Docker enables you to separate your applications from your infrastructure so you can deliver software quickly.容器技术顾名思义，小linux系统 container ： a loosely isolated environment that run the applicaition 比较概括吧，就是具体指运行的哪一个环境叫做容器，docker 本身并不叫 container is lightweight and contain everything needed docker 的功能： Fast, consistent delivery of your applications Responsive deployment and scaling 弹性伸缩吧，响应式部署 Running more workloads on the same hardware 跟上面一样，动态的Docker architectrue client-server architecture Docker daemon 负责构建部署和发布容器，Docker Client用来与docker daemon通讯，可以本机，也可以远程。使用rest api，基于 unix socket或者 一个网络接口？？？不懂是啥意思 。udp么？ 还有一个Docker client is Docker Compose , let you work with applications consisting of a set of containers. 一一介绍Docker daemonThe Docker daemon (dockerd) listens for Docker API requests and manages Docker objects such as images, containers, networks, and volumes. A daemon can also communicate with other daemons to manage Docker services.docker对象，daemon之间可以相互通讯 Docker clientThe Docker client (docker) is the primary way that many Docker users interact with Docker. When you use commands such as docker run, the client sends these commands to dockerd, which carries them out. The docker command uses the Docker API. The Docker client can communicate with more than one daemon.用户工具了属实是，去docker api查用法 Docker Desktop Docker Desktop includes the Docker daemon (dockerd), the Docker client (docker), Docker Compose, Docker Content Trust, Kubernetes, and Credential Helper. 桌面工具 Docker registriesA Docker registry stores Docker images. Docker Hub is a public registry that anyone can use, and Docker is configured to look for images on Docker Hub by default. You can even run your own private registry. When you use the docker pull or docker run commands, the required images are pulled from your configured registry. When you use the docker push command, your image is pushed to your configured registry. 镜像中心 Docker Object docker对象Images：只读的，有指南，说明？大概是这个意思的docker 容器 You might create your own images or you might only use those created by others and published in a registry. To build your own image, you create a Dockerfile with a simple syntax for defining the steps needed to create the image and run it. Each instruction in a Dockerfile creates a layer in the image. When you change the Dockerfile and rebuild the image, only those layers which have changed are rebuilt. This is part of what makes images so lightweight, small, and fast, when compared to other virtualization technologies. 听起来挺强大的，分层的 ContainersA container is a runnable instance of an image. You can create, start, stop, move, or delete a container using the Docker API or CLI. docker api看起来挺重要的，是基础 You can connect a container to one or more networks, attach storage to it, or even create a new image based on its current state. 一个容器可以连接多个网络？这有点玄乎 容器的独立的，可以通过主机，或者其他容器控制 A container is defined by its image as well as any configuration options you provide to it when you create or start it. When a container is removed, any changes to its state that are not stored in persistent storage disappear，没有持久化的配置会消亡 dcoker run 流程 docker run -i -t ununtu /bin/bash If you do not have the ubuntu image locally, Docker pulls it from your configured registry, as though you had run docker pull ubuntu manually. 第一步拉取镜像 Docker creates a new container, as though you had run a docker container create command manually.创建容器 Docker allocates a read-write filesystem to the container, as its final layer. This allows a running container to create or modify files and directories in its local filesystem.创建文件系统 Docker creates a network interface to connect the container to the default network, since you did not specify any networking options. This includes assigning an IP address to the container. By default, containers can connect to external networks using the host machine’s network connection.创建网络接口，拦截到default网络，分配ip Docker starts the container and executes &#x2F;bin&#x2F;bash. Because the container is running interactively and attached to your terminal (due to the -i and -t flags), you can provide input using your keyboard while the output is logged to your terminal. When you type exit to terminate the &#x2F;bin&#x2F;bash command, the container stops but is not removed. You can start it again or remove it. bash关了容器也就停了，所以还要有背后运行 底层技术 Go写的，借鉴了linux的特性 namespace来提供隔离的工作空间也就是container These namespaces provide a layer of isolation. Each aspect of a container runs in a separate namespace and its access is limited to that namespace. 有一个隔离的层的概念，不知道他想说啥，新东西？","categories":[],"tags":[{"name":"分布式技术","slug":"分布式技术","permalink":"https://dormancywang.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E6%8A%80%E6%9C%AF/"},{"name":"Docker","slug":"Docker","permalink":"https://dormancywang.github.io/tags/Docker/"}]},{"title":"关于jvm","slug":"关于jvm","date":"2022-06-02T12:40:45.000Z","updated":"2022-06-02T12:41:43.764Z","comments":true,"path":"2022/06/02/关于jvm/","link":"","permalink":"https://dormancywang.github.io/2022/06/02/%E5%85%B3%E4%BA%8Ejvm/","excerpt":"","text":"java 内存模型","categories":[],"tags":[{"name":"java","slug":"java","permalink":"https://dormancywang.github.io/tags/java/"}]},{"title":"关于数据库","slug":"关于数据库","date":"2022-06-02T12:35:51.000Z","updated":"2022-06-02T12:36:51.569Z","comments":true,"path":"2022/06/02/关于数据库/","link":"","permalink":"https://dormancywang.github.io/2022/06/02/%E5%85%B3%E4%BA%8E%E6%95%B0%E6%8D%AE%E5%BA%93/","excerpt":"","text":"hello","categories":[],"tags":[{"name":"数据库","slug":"数据库","permalink":"https://dormancywang.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"}]}],"categories":[],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://dormancywang.github.io/tags/Docker/"},{"name":"分布式","slug":"分布式","permalink":"https://dormancywang.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F/"},{"name":"分布式技术","slug":"分布式技术","permalink":"https://dormancywang.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E6%8A%80%E6%9C%AF/"},{"name":"java","slug":"java","permalink":"https://dormancywang.github.io/tags/java/"},{"name":"数据库","slug":"数据库","permalink":"https://dormancywang.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"}]}